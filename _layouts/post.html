---
layout: default
---

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- 基础元数据 -->
    <meta charset="UTF-8">
    <title>{{ page.title }} | 沙勒避难所</title>
    <meta name="description" content="{{ page.description | default: site.description | truncate: 155 }}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <!-- 预加载关键资源 -->
    <link rel="preload" href="/assets/css/main.css" as="style">
    <link rel="preload" href="/assets/fonts/Inter.woff2" as="font" type="font/woff2" crossorigin>
</head>

<body class="post-template">
    <!-- 调用页头 -->
    {% include header.html %}

    <main class="content-wrapper">
        <article class="markdown-content">
            <!-- 文章元信息 -->
            <header class="post-meta">
                <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%Y年%m月%d日" }}</time>
                <span class="reading-time">{{ content | number_of_words | divided_by: 300 }} 分钟阅读</span>
            </header>

            <!-- 正文内容 -->
            {{ content }}

            <!-- AI摘要区块 -->
            {% if page.AI %}
            <section class="ai-summary">
                <div class="ai-container">
                    <h2>📌 智能摘要</h2>
                    <div class="ai-content">
                        {{ page.AI | markdownify }}
                    </div>
                    <div class="ai-notice">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
                        <span>本摘要经过人工审核，建议结合正文参考阅读</span>
                    </div>
                </div>
            </section>
            {% endif %}
        </article>
    </main>

    <!-- 调用页脚 -->
    {% include footer.html %}

    <!-- Markdown增强样式 -->
    <style>
    /* ====== Markdown解析增强 ====== */
    .markdown-content {
        max-width: 780px;
        margin: 0 auto;
        padding: 2rem 1.5rem;
        font-size: 1.1rem;
        line-height: 1.8;
        color: #374151;
    }

    /* 标题层次 */
    h1 { font-size: 2.2rem; margin: 2.5rem 0 1.5rem; }
    h2 { font-size: 1.8rem; margin: 2rem 0 1.2rem; border-bottom: 2px solid #e5e7eb; padding-bottom: 0.5rem; }
    h3 { font-size: 1.5rem; margin: 1.8rem 0 1rem; }
    h4 { font-size: 1.3rem; margin: 1.5rem 0 0.8rem; }

    /* 段落与列表 */
    p { margin: 1.2rem 0; }
    ul, ol { margin: 1.5rem 0; padding-left: 2rem; }
    li { margin: 0.6rem 0; }

    /* 代码区块 */
    pre {
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        padding: 1.5rem;
        overflow-x: auto;
        margin: 2rem 0;
        font-size: 0.95em;
    }

    code {
        background: rgba(175,184,193,0.2);
        padding: 0.2em 0.4em;
        border-radius: 4px;
        font-family: 'JetBrains Mono', monospace;
    }

    /* 引用块 */
    blockquote {
        border-left: 4px solid #3b82f6;
        background: #f0f4ff;
        margin: 1.5rem 0;
        padding: 1rem 1.5rem;
        border-radius: 0 6px 6px 0;
    }

    /* 表格增强 */
    table {
        width: 100%;
        border-collapse: collapse;
        margin: 2rem 0;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    th, td {
        padding: 0.8rem;
        border: 1px solid #e5e7eb;
    }

    th {
        background: #f3f4f6;
        font-weight: 600;
    }

    /* 响应式优化 */
    @media (max-width: 768px) {
        .markdown-content {
            padding: 1.5rem 1rem;
            font-size: 1rem;
        }

        h1 { font-size: 1.8rem; }
        h2 { font-size: 1.5rem; }
        
        pre {
            margin-left: -1rem;
            margin-right: -1rem;
            border-radius: 0;
        }
    }
    </style>

    <!-- AI摘要样式 -->
    <style>
    .ai-summary {
        background: #f0f4ff;
        border-radius: 12px;
        margin: 3rem 0;
        padding: 2rem;
        position: relative;
    }

    .ai-summary h2 {
        font-size: 1.4rem;
        color: #1d4ed8;
        margin: 0 0 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.8rem;
    }

    .ai-content {
        background: white;
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }

    .ai-notice {
        margin-top: 1.5rem;
        padding-top: 1rem;
        border-top: 1px solid rgba(29,78,216,0.1);
        display: flex;
        align-items: center;
        gap: 0.6rem;
        font-size: 0.9rem;
        color: #4b5563;
    }

    @media (max-width: 640px) {
        .ai-summary {
            margin-left: -1rem;
            margin-right: -1rem;
            border-radius: 0;
        }
    }
    </style>
</body>
</html>