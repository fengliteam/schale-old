<section class="comment-system">
  <h2 class="comment-title">ğŸ’¬ è¯»è€…è®¨è®ºåŒº</h2>
  
  <!-- è¯„è®ºå®¹å™¨ -->
  <div id="cusdis_thread"
    data-host="https://cusdis.com"
    data-app-id="{{ site.cusdis.app_id }}"
    data-page-id="{{ page.url | url_encode }}"
    data-page-url="{{ page.url | absolute_url }}"
    data-page-title="{{ page.title }}"
    data-theme="light"
  ></div>

  <!-- åŠ è½½çŠ¶æ€ç®¡ç† -->
  <div class="comment-status">
    <div class="loading">â³ æ­£åœ¨åŠ è½½è¯„è®ºç³»ç»Ÿ...</div>
    <div class="error">âš ï¸ åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œååˆ·æ–°</div>
  </div>

  <!-- å¼‚æ­¥åŠ è½½è„šæœ¬ -->
  <script>
  (function() {
    const loadComment = () => {
      const script = document.createElement('script');
      script.src = 'https://cusdis.com/js/cusdis.es.js';
      script.async = true;
      script.defer = true;
      
      script.onload = () => {
        document.querySelector('.loading').hidden = true;
      };
      
      script.onerror = () => {
        document.querySelector('.loading').hidden = true;
        document.querySelector('.error').hidden = false;
      };
      
      document.body.appendChild(script);
    }
    
    // æ»šåŠ¨åˆ°è¯„è®ºåŒºåŸŸæ—¶åŠ è½½
    const observer = new IntersectionObserver((entries) => {
      if(entries[0].isIntersecting) {
        loadComment();
        observer.disconnect();
      }
    });
    
    observer.observe(document.querySelector('.comment-system'));
  })();
  </script>

  <style>
  .comment-system {
    margin: var(--space-xl) 0;
    padding: var(--space-md);
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  }
  
  .comment-title {
    font-size: 1.25rem;
    color: var(--primary);
    margin-bottom: var(--space-md);
    border-left: 4px solid var(--accent);
    padding-left: var(--space-sm);
  }
  
  .comment-status div {
    padding: var(--space-sm);
    text-align: center;
    color: var(--text-light);
  }
  
  .comment-status .error {
    display: none;
    color: #dc3545;
  }
  </style>
</section>